<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>後台</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/Login.css">
</head>
<body>
    <div class="topbar">
        <button onclick="jump('index')">首頁</button>
    </div>
    <div class="login-container">
        <div class="login-title">後台登入</div>
        <form id="loginForm" autocomplete="off" onsubmit="return false;">
            <div class="form-group">
                <label for="username">帳號</label>
                <input type="text" id="username" name="username" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label for="password">密碼</label>
                <input type="password" id="password" name="password" autocomplete="off" required>
            </div>
            <button class="login-btn" type="submit">登入</button>
            <div class="tips" id="tips"></div>
            <input type="hidden" id="factorySite" name="factorySite" value="">
        </form>
        <input type="hidden" id="factorySite" name="factorySite" value="">
    </div>
    <script>
        function jump(filname){
            window.location.href = filname + ".html?factory=" + document.getElementById('factorySite').value;
        }
        document.getElementById("loginForm").addEventListener("submit", function(e){
            const user = document.getElementById("username").value.trim();
            const pwd = document.getElementById("password").value.trim();
            const tips = document.getElementById("tips");
            if(!user || !pwd){
                tips.textContent = "請輸入帳號和密碼";
                return;
            }

            if(user === "admin" && pwd === "123456"){
                tips.style.color = "#2c7";
                tips.textContent = "登入成功，跳轉中...";
                jump("LeaveDataUpdate");
            }else{
                tips.style.color = "#c22";
                tips.textContent = "帳號或密碼錯誤";
            }
        });
        document.addEventListener("DOMContentLoaded", function() {
            // 帶入 factorySite 隱藏欄位
            const params = new URLSearchParams(window.location.search);
            const factory = params.get("factory") || "";
            document.getElementById('factorySite').value = factory;
        });
    </script>
</body>
</html>
